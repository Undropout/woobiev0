import{o as C,g as $,r as h,d as L,a as H}from"./firebase-config-DqIMhm9h.js";/* empty css              */const b=document.getElementById("timeline"),B={tier1a:"1A",tier1b:"1B",tier2:"2",tier3:"3"};function m(f,u){return`<strong class="woobie-${u}">${f}</strong>`}C(H,async f=>{if(!f){b.innerHTML='<p style="color:#ff6666;">You must be logged in to view history.</p>';return}const u=f.uid,p=(await $(h(L,`users/${u}/currentMatch`))).val();if(!p||!p.matchID||!p.username){b.innerHTML='<p style="color:#ff6666;">No match found.</p>';return}const y=p.matchID,k=p.username,M=(await $(h(L,`matches/${y}/users`))).val()||{},R=Object.keys(M).find(n=>n!==u);if(!R){b.innerHTML='<p style="color:#ff6666;">Partner not found.</p>';return}const E=M[R],U=[{key:"bios",label:"🧬 Bios",render:(n,a,s,c,l,i)=>{var r,e;return`<p>${m(c,((r=i[a])==null?void 0:r.mode)||"normal")}: ${n[a]||"(no bio)"}</p>
                  <p>${m(l,((e=i[s])==null?void 0:e.mode)||"normal")}: ${n[s]||"(no bio)"}</p>`}},...["tier1a","tier1b","tier2","tier3"].map(n=>({key:n,label:`Tier ${B[n]} Answers`,render:(a,s,c,l,i,r)=>{let e="";const t=a[s],o=a[c],d=Array.isArray(t)?t:Array.isArray(t==null?void 0:t.answers)?t.answers:[],w=Array.isArray(o)?o:Array.isArray(o==null?void 0:o.answers)?o.answers:[];return!d.length&&!w.length?"<p>(No answers available yet)</p>":(d.forEach((g,A)=>{var T,v,x;e+=`<p><strong>Q${A+1}</strong></p>`,e+=`<p>${m(l,((T=r[s])==null?void 0:T.mode)||"normal")}: ${(g==null?void 0:g.value)||g||""}</p>`,e+=`<p>${m(i,((v=r[c])==null?void 0:v.mode)||"normal")}: ${((x=w[A])==null?void 0:x.value)||w[A]||""}</p>`}),e)}})),{key:"tier1bLetters",label:"💌 Tier 1B Letters",render:(n,a,s,c,l,i)=>{var r,e;return`<details><summary>${m(c,((r=i[a])==null?void 0:r.mode)||"normal")}'s Letter</summary><p>${n[a]||"(no message)"}</p></details>
                  <details><summary>${m(l,((e=i[s])==null?void 0:e.mode)||"normal")}'s Letter</summary><p>${n[s]||"(no message)"}</p></details>`}},{key:"tier2Rewards",label:"🎁 Tier 2 Rewards",render:(n,a,s,c,l,i)=>{var o,d;const r=n[a]||{},e=n[s]||{};let t="";return(r.text||r.imageURL||r.audioURL)&&(t+=`<details><summary>${m(c,((o=i[a])==null?void 0:o.mode)||"normal")}'s Reward</summary>`,r.text&&(t+=`<p><strong>Text:</strong> ${r.text}</p>`),r.imageURL&&(t+=`<p><img class="greyscale" src="${r.imageURL}" alt="${r.alt||"image"}" /></p>`),r.audioURL&&(t+=`<p><audio controls src="${r.audioURL}"></audio></p>`),t+="</details>"),(e.text||e.imageURL||e.audioURL)&&(t+=`<details><summary>${m(l,((d=i[s])==null?void 0:d.mode)||"normal")}'s Reward</summary>`,e.text&&(t+=`<p><strong>Text:</strong> ${e.text}</p>`),e.imageURL&&(t+=`<p><img class="greyscale" src="${e.imageURL}" alt="${e.alt||"image"}" /></p>`),e.audioURL&&(t+=`<p><audio controls src="${e.audioURL}"></audio></p>`),t+="</details>"),t||"<p>(No rewards found)</p>"}}],S=h(L,`matches/${y}/modes`);$(S).then(n=>{const a=n.val()||{};for(const s of U){const c=s.key==="tier2Rewards"?`matches/${y}/tier2Rewards`:`matches/${y}/${s.key}`,l=h(L,c);$(l).then(i=>{const r=i.val();if(!r||Object.keys(r).length<1)return;const e=document.createElement("details"),t=document.createElement("summary");t.textContent=s.label,e.appendChild(t);const o=document.createElement("div");try{o.innerHTML=s.render(r,u,R,k,E,a)}catch(d){console.error("Error rendering section:",s.key,d),o.innerHTML='<p style="color:#ff6666">Error displaying this section.</p>'}e.appendChild(o),b.appendChild(e)})}})});
