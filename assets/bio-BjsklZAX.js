const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/preload-helper-DX5QSOJm.js","assets/firebase-config-DqIMhm9h.js"])))=>i.map(i=>d[i]);
import{a as h,r as s,d as c,b as p,u as w}from"./firebase-config-DqIMhm9h.js";/* empty css              */import{_ as y}from"./preload-helper-DX5QSOJm.js";import"./logout-C5vuDOMp.js";function I(t){return t.replace(new RegExp("(\\p{Emoji_Presentation}|\\p{Emoji}\\uFE0F)","gu"),a=>`<span class="woobie-emoji">${a}</span>`)}document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector("h1");t.innerHTML=I(t.textContent);const a=document.getElementById("submit-bio");a.innerHTML='Submit <span class="woobie-emoji">â†’</span>'});const l=document.getElementById("bio-input"),E=document.getElementById("bio-count"),e=document.getElementById("bio-warning"),n=document.getElementById("submit-bio");l.addEventListener("input",()=>{const t=l.value.trim().split(/\s+/).filter(Boolean);E.textContent=`${t.length} / 250 words`,t.length>250?(e.textContent="Too many words! Please stay under 250.",n.disabled=!0):(e.textContent="",n.disabled=!1)});n.onclick=async()=>{const t=l.value.trim(),a=t.split(/\s+/).filter(Boolean),u=/(.)\1{20,}/.test(t);if(a.length>250||u){e.textContent="Please shorten your bio and avoid repeated characters.";return}const r=h.currentUser;if(!r){e.textContent="You're not logged in. Please log in again.";return}n.disabled=!0,e.textContent="Submitting...",e.style.color="#33ff33";try{let o=localStorage.getItem("woobieMatchID");if(!o){const{get:b}=await y(async()=>{const{get:g}=await import("./preload-helper-DX5QSOJm.js").then(f=>f.i);return{get:g}},__vite__mapDeps([0,1])),i=(await b(s(c,`users/${r.uid}/currentMatch`))).val();if(!i||!i.matchID){e.textContent="No match found. Please restart from the beginning.",e.style.color="#ff6666",n.disabled=!1;return}o=i.matchID,localStorage.setItem("woobieMatchID",o),i.username&&localStorage.setItem("woobieUsername",i.username)}localStorage.setItem("woobieBio",t),await r.getIdToken(!0);const m=s(c,`matches/${o}/bios/${r.uid}`);await p(m,t);const d=s(c,`users/${r.uid}/currentMatch`);await w(d,{stage:"tier1a"}),window.location.href="/tier1a/index.html"}catch(o){console.error("Error submitting bio:",o),e.textContent="Error submitting bio. Please try again.",e.style.color="#ff6666",n.disabled=!1}};
