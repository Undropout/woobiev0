import{r as U,d as w,g as R}from"./firebase-config-CQBF9bbN.js";/* empty css              */const d=localStorage.getItem("woobieUsername"),f=localStorage.getItem("woobieMatchID"),A=document.getElementById("timeline"),T={tier1a:"1A",tier1b:"1B",tier2:"2",tier3:"3"};function u(r,o){return`<strong class="woobie-${o}">${r}</strong>`}const E=[{key:"bios",label:"🧬 Bios",render:(r,o,l,i,a,c)=>`<p>${u(d,a[d])}: ${r[o]||""}</p>
                  <p>${u(i,a[i])}: ${r[l]||""}</p>`},...["tier1a","tier1b","tier2","tier3"].map(r=>({key:r,label:`Tier ${T[r]} Answers`,render:(o,l,i,a,c,s)=>{let t="";const e=o[l],n=o[i],y=Array.isArray(e)?e:Array.isArray(e==null?void 0:e.answers)?e.answers:[],g=Array.isArray(n)?n:Array.isArray(n==null?void 0:n.answers)?n.answers:[];return!y.length&&!g.length?"<p>(No answers available yet)</p>":(y.forEach((m,p)=>{var $;t+=`<p><strong>Q${p+1}</strong></p>`,t+=`<p>${u(d,c[d])}: ${(m==null?void 0:m.value)||m||""}</p>`,t+=`<p>${u(a,c[a])}: ${(($=g[p])==null?void 0:$.value)||g[p]||""}</p>`}),t)}})),{key:"tier1bLetters",label:"💌 Tier 1B Letters",render:(r,o,l,i,a,c)=>`<details><summary>${u(d,a[d])}'s Letter</summary><p>${r[o]||"(no message)"}</p></details>
                  <details><summary>${u(i,a[i])}'s Letter</summary><p>${r[l]||"(no message)"}</p></details>`},{key:"tier2Rewards",label:"🎁 Tier 2 Extra Glimpses",render:(r,o,l,i,a,c)=>{const s=r[o]||{},t=r[l]||{};let e="";return(s.text||s.imageURL||s.audioURL)&&(e+=`<details><summary>${u(d,a[d])}'s Extra Glimpse</summary>`,s.text&&(e+=`<p><strong>Text:</strong> ${s.text}</p>`),s.imageURL&&(e+=`<p><img class="greyscale" src="${s.imageURL}" alt="${s.alt||"image"}" /></p>`),s.audioURL&&(e+=`<p><audio controls src="${s.audioURL}"></audio></p>`),e+="</details>"),(t.text||t.imageURL||t.audioURL)&&(e+=`<details><summary>${u(i,a[i])}'s Extra Glimpse</summary>`,t.text&&(e+=`<p><strong>Text:</strong> ${t.text}</p>`),t.imageURL&&(e+=`<p><img class="greyscale" src="${t.imageURL}" alt="${t.alt||"image"}" /></p>`),t.audioURL&&(e+=`<p><audio controls src="${t.audioURL}"></audio></p>`),e+="</details>"),e||"<p>(No extra glimpses found)</p>"}}],k=U(w,`matches/${f}/modes`),v=U(w,`matches/${f}/users`);Promise.all([R(k),R(v)]).then(([r,o])=>{var t;const l=r.val()||{},i=o.val()||{},a={},c={};let s=null;for(const[e,n]of Object.entries(i))a[n]=((t=l[e])==null?void 0:t.mode)||"normal",c[e]=n,n===d&&(s=e);for(const e of E){const n=e.key==="tier2Rewards"?`matches/${f}/tier2Rewards`:`matches/${f}/${e.key}`,y=U(w,n);R(y).then(g=>{const m=g.val();if(!m||Object.keys(m).length<1)return;const p=Object.keys(m).find(L=>L!==s),$=c[p],b=document.createElement("details"),x=document.createElement("summary");x.textContent=e.label,b.appendChild(x);const h=document.createElement("div");try{h.innerHTML=e.render(m,s,p,$,a,c)}catch(L){h.innerHTML='<p style="color:#ff6666">Error displaying this section.</p>',console.error("Section render error:",L)}b.appendChild(h),A.appendChild(b)})}});
